# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è FastAPI Foundry

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
- ‚úÖ –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR)
- ‚úÖ –¢–∞–π–º–µ—Ä—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏

### 2. –ê–Ω–∞–ª–∏–∑ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

### 3. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ "Logs" –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º
- ‚úÖ –î–∞—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

### 4. API Endpoints
- ‚úÖ `GET /api/v1/logs/health` - –ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `GET /api/v1/logs/errors` - –°–≤–æ–¥–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `GET /api/v1/logs/performance` - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ `GET /api/v1/logs/recent` - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- ‚úÖ `GET /api/v1/logs/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤
- ‚úÖ `POST /api/v1/logs/test` - –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from src.utils.logging_system import get_logger

logger = get_logger("my-module")

# –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logger.info("–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ")
logger.error("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞", error="Connection timeout")
logger.warning("–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ", user_id=123)
```

### –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–π–º–µ—Ä
with logger.timer("database_query", query_type="SELECT"):
    result = await db.execute(query)

# –†–µ–∑—É–ª—å—Ç–∞—Ç: "–û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: database_query (0.234s)"
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤

```python
logger.log_api_request(
    method="POST",
    path="/api/v1/generate",
    status_code=200,
    duration=1.234,
    user_id=user_id
)
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–æ–¥–µ–ª—è–º–∏

```python
logger.log_model_operation(
    model_id="deepseek-chat",
    operation="generate_text",
    status="success",
    duration=2.1,
    tokens_generated=150
)
```

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –î–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Logs"**
3. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ
- –î–æ—Å—Ç—É–ø–Ω—ã: All, Debug, Info, Warning, Error

### –ú–µ—Ç—Ä–∏–∫–∏
- **System Health** - –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- **Error Summary** - –°–≤–æ–¥–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞ 24 —á–∞—Å–∞
- **Performance** - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìä API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

```bash
curl http://localhost:8000/api/v1/logs/health
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥

```bash
curl "http://localhost:8000/api/v1/logs/errors?hours=24"
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
curl "http://localhost:8000/api/v1/logs/performance?hours=24"
```

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏

```bash
curl "http://localhost:8000/api/v1/logs/recent?level=error&limit=50"
```

## üìÅ –§–∞–π–ª—ã –ª–æ–≥–æ–≤

```
logs/
‚îú‚îÄ‚îÄ fastapi-foundry.log          # –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏
‚îú‚îÄ‚îÄ fastapi-foundry-errors.log   # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ fastapi-foundry-structured.jsonl  # JSON –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ model-manager.log            # –õ–æ–≥–∏ –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ foundry-client.log           # –õ–æ–≥–∏ Foundry –∫–ª–∏–µ–Ω—Ç–∞
‚îî‚îÄ‚îÄ mcp-client.log              # –õ–æ–≥–∏ MCP –∫–ª–∏–µ–Ω—Ç–∞
```

## üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

### –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
grep "ERROR" logs/fastapi-foundry.log | tail -20

# JSON –ª–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏
jq 'select(.level == "error")' logs/fastapi-foundry-structured.jsonl
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ API

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ endpoints
jq -r 'select(.api_path) | .api_path' logs/fastapi-foundry-structured.jsonl | sort | uniq -c
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```bash
# –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
jq -r 'select(.duration) | .duration' logs/fastapi-foundry-structured.jsonl | awk '{sum+=$1; count++} END {print sum/count}'
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –†–µ–∂–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# Development (–ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏)
export FASTAPI_FOUNDRY_MODE=dev

# Production (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –ª–æ–≥–∏)
export FASTAPI_FOUNDRY_MODE=prod
```

### –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
from src.utils.logging_system import set_global_mode

# –ò–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º –≤ runtime
set_global_mode("prod")
```

## üéì –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä (–∏–∑ example_mcp_client.py)

```python
from src.logger import get_logger

logger = get_logger("mcp-client")

async def start_server(self):
    logger.info("–ó–∞–ø—É—Å–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞", path=self.server_path)
    
    if not self.server_path.exists():
        logger.error("MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω", path=self.server_path)
        return False
    
    try:
        with logger.timer("mcp_server_start"):
            self.process = await asyncio.create_subprocess_exec(...)
            
        logger.info("MCP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω", pid=self.process.pid)
        return True
        
    except Exception as e:
        logger.exception("–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞", error=str(e))
        return False
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/logging_guidelines.md`

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- [ ] –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- [ ] –û—à–∏–±–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏
- [ ] –ù–µ—Ç `print()` –≤ production –∫–æ–¥–µ
- [ ] –¢–∞–π–º–µ—Ä—ã –¥–ª—è –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ