# üì° –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ REST API FastAPI Foundry.

---
**üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è:** [üè† –ì–ª–∞–≤–Ω–∞—è](../README.md) | [üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞](../installation.md) | [üöÄ –ó–∞–ø—É—Å–∫](../running.md) | [üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](../usage.md)
---

## üìã –†–∞–∑–¥–µ–ª—ã API

| –†–∞–∑–¥–µ–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| **–û—Å–Ω–æ–≤–Ω—ã–µ** | |
| ü§ñ [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞](generation.md) | `POST /generate`, `POST /batch-generate` |
| üß† [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª—è–º–∏](models.md) | `GET /models`, `POST /models/connect` –∏ –¥—Ä. |
| üîç [–°–∏—Å—Ç–µ–º–∞ RAG](rag.md) | `POST /rag/search`, `POST /rag/reload` –∏ –¥—Ä. |
| **–°–∏—Å—Ç–µ–º–∞ –∏ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | |
| ü©∫ [–°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è](health.md) | `GET /health` |
| üìä [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –õ–æ–≥–∏](monitoring.md) | `GET /logs/health`, `GET /logs/errors` –∏ –¥—Ä. |
| ‚öôÔ∏è [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](configuration.md) | `GET /config` |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –£—Ç–∏–ª–∏—Ç—ã** | |
| üéÆ [–ü—Ä–∏–º–µ—Ä—ã](examples.md) | `GET /examples/list`, `POST /examples/run` |
| üåê [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É–Ω–Ω–µ–ª—è–º–∏](tunnel.md) | `GET /tunnel/status`, `POST /tunnel/start` |
| üîß [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Foundry](foundry.md) | `GET /foundry/status`, `POST /foundry/service/start` |


## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
curl -k https://localhost:8443/api/v1/health
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
```bash
curl -k -X POST https://localhost:8443/api/v1/generate \
  -H "Content-Type: application/json" \
  -d '{"prompt": "–ü—Ä–∏–≤–µ—Ç!", "use_rag": true}'
```

### 3. –ü–æ–∏—Å–∫ –≤ RAG
```bash
curl -k -X POST https://localhost:8443/api/v1/rag/search \
  -H "Content-Type: application/json" \
  -d '{"query": "—É—Å—Ç–∞–Ω–æ–≤–∫–∞", "top_k": 3}'
```

## üìö –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –∏–∑—É—á–µ–Ω–∏—è API –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:

- **Swagger UI:** `https://localhost:8443/docs`
- **ReDoc:** `https://localhost:8443/redoc`
- **OpenAPI JSON:** `https://localhost:8443/openapi.json`

## üîß Python –ö–ª–∏–µ–Ω—Ç

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API —á–µ—Ä–µ–∑ Python –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `examples/example_client.py`.

```python
from examples.example_client import FastAPIFoundryClient

async with FastAPIFoundryClient() as client:
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
    result = await client.generate_text("–ü—Ä–∏–≤–µ—Ç!")
    
    # RAG –ø–æ–∏—Å–∫
    search = await client.rag_search("—É—Å—Ç–∞–Ω–æ–≤–∫–∞")
    
    # –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
    models = await client.list_models()
```
–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ **[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ—Ä–∞–º](../examples.md)**.

## üìù –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ API

### –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "success": true, 
  "data": { ... },
  "timestamp": "2025-12-24T12:00:00Z"
}
```

#### –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π
```json
{
  "success": false,
  "error": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏",
  "detail": "–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–ª–∏ –¥–µ—Ç–∞–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.",
  "timestamp": "2025-12-24T12:00:00Z"
}
```

### –°—Ç–∞—Ç—É—Å-–∫–æ–¥—ã HTTP

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :-- | :--- |
| 200 | `OK` - –ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω. |
| 400 | `Bad Request` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è). |
| 401 | `Unauthorized` - –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç API –∫–ª—é—á). |
| 404 | `Not Found` - –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω. |
| 429 | `Too Many Requests` - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤. |
| 500 | `Internal Server Error` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. |
| 503 | `Service Unavailable` - –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞). |

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–ï—Å–ª–∏ –≤ —Ñ–∞–π–ª–µ `.env` –≤–∫–ª—é—á–µ–Ω API –∫–ª—é—á (`API_KEY_ENABLED=true`), –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization` –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

```env
# .env
API_KEY_ENABLED=true
API_KEY=your-super-secret-key
```

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å –∫–ª—é—á–æ–º:
```bash
curl -k -H "Authorization: Bearer your-super-secret-key" \
  https://localhost:8443/api/v1/health
```

### üåç CORS (Cross-Origin Resource Sharing)

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ CORS —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `CORS_ORIGINS` –≤ —Ñ–∞–π–ª–µ `.env`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ API.

```env
# –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–æ–º–µ–Ω–∞
CORS_ORIGINS=["http://localhost:3000", "https://your-app.com"]
```

---
**[‚¨ÜÔ∏è –ù–∞–∑–∞–¥ –∫ –≥–ª–∞–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](../README.md)**
