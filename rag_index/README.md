# üîç RAG Index

**–ò–Ω–¥–µ–∫—Å —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (Retrieval-Augmented Generation)**

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω–¥–µ–∫—Å RAG —Å–∏—Å—Ç–µ–º—ã FastAPI Foundry - –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|--------|------------|
| **`faiss.index`** | FAISS –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –∏–Ω–¥–µ–∫—Å | ~MB | –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º |
| **`chunks.json`** | –¢–µ–∫—Å—Ç–æ–≤—ã–µ —á–∞–Ω–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | ~KB | –ò—Å—Ö–æ–¥–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ |
| **`index_info.json`** | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å–∞ | ~KB | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö |

## ü§ñ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
```json
{
  "model": "sentence-transformers/all-MiniLM-L6-v2",
  "chunks_count": 532,
  "dimension": 384,
  "version": "1.0.0"
}
```

### üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
- **–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤**: `sentence-transformers/all-MiniLM-L6-v2`
- **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–æ–≤**: 384
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤**: 532
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FastAPI Foundry (Markdown —Ñ–∞–π–ª—ã)

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç RAG —Å–∏—Å—Ç–µ–º–∞

### 1. üìù –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```python
# –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞
1. –ü–∞—Ä—Å–∏–Ω–≥ Markdown —Ñ–∞–π–ª–æ–≤ –∏–∑ docs/
2. –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏ (chunks) –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —á–µ—Ä–µ–∑ sentence-transformers
4. –°–æ–∑–¥–∞–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ —Ç–µ–∫—Å—Ç–æ–≤
```

### 2. üîç –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```python
# –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–∏—Å–∫–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–µ—Ç –≤–æ–ø—Ä–æ—Å
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —ç–º–±–µ–¥–¥–∏–Ω–≥ –≤–æ–ø—Ä–æ—Å–∞
3. FAISS –∏—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –≤–µ–∫—Ç–æ—Ä—ã –≤ –∏–Ω–¥–µ–∫—Å–µ
4. –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏
5. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ AI –º–æ–¥–µ–ª—å
```

### 3. ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
```python
# –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
1. AI –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–ø—Ä–æ—Å + –Ω–∞–π–¥–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
```

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### üìñ –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `configuration.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `deployment.md` - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ production
- `development.md` - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `examples.md` - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- `howto.md` - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã
- `installation.md` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- `launchers.md` - –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞
- `mcp_integration.md` - MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- `project_info.md` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `running.md` - –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
- `tunnel_guide.md` - –¢—É–Ω–Ω–µ–ª–∏ –∏ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø
- `usage.md` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### üîç –ü—Ä–∏–º–µ—Ä—ã —á–∞–Ω–∫–æ–≤
```json
{
  "source": "configuration.md",
  "section": "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞",
  "text": "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: cp .env.example .env"
},
{
  "source": "examples.md", 
  "section": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞",
  "text": "curl -X POST http://localhost:8000/api/v1/generate..."
}
```

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAG

### üîç –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ API
```bash
# –ü–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
curl -X POST http://localhost:8000/api/v1/rag/search \
  -H "Content-Type: application/json" \
  -d '{
    "query": "–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é",
    "top_k": 5
  }'
```

### ü§ñ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
curl -X POST http://localhost:8000/api/v1/generate \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å FastAPI Foundry?",
    "use_rag": true,
    "temperature": 0.6
  }'
```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞
```json
{
  "success": true,
  "results": [
    {
      "source": "configuration.md",
      "section": "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏", 
      "content": "cp .env.example .env",
      "score": 0.892
    }
  ],
  "total_found": 5,
  "search_time": 0.045
}
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞

### üìù –ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
python rag_indexer.py --docs-dir docs/ --output-dir rag_index/

# –ß–µ—Ä–µ–∑ API
curl -X POST http://localhost:8000/api/v1/rag/reload \
  -H "Authorization: Bearer your-api-key"
```

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```python
from src.rag.rag_system import rag_system

# –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ –∏–Ω–¥–µ–∫—Å
await rag_system.add_document(
    text="–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
    source="new_doc.md",
    section="–ù–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª"
)
```

## üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞

### üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
- **`top_k`**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- **`threshold`**: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (0.0-1.0)
- **`max_length`**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ config.json
```json
{
  "rag_system": {
    "enabled": true,
    "model": "sentence-transformers/all-MiniLM-L6-v2",
    "index_dir": "./rag_index",
    "chunk_size": 1000,
    "chunk_overlap": 200,
    "top_k": 5
  }
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞
- **–ü–æ–∏—Å–∫ –≤ –∏–Ω–¥–µ–∫—Å–µ**: ~10-50ms
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞**: ~100-200ms
- **–û–±—â–µ–µ –≤—Ä–µ–º—è RAG –ø–æ–∏—Å–∫–∞**: ~150-300ms

### üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **FAISS –∏–Ω–¥–µ–∫—Å**: ~2-5MB –≤ RAM
- **–ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤**: ~90MB –≤ RAM
- **–ß–∞–Ω–∫–∏ —Ç–µ–∫—Å—Ç–∞**: ~1-2MB –≤ RAM

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### ü§ñ –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: `sentence-transformers/all-MiniLM-L6-v2`
- **–†–∞–∑–º–µ—Ä**: ~90MB
- **–Ø–∑—ã–∫–∏**: –ê–Ω–≥–ª–∏–π—Å–∫–∏–π, —á–∞—Å—Ç–∏—á–Ω–æ —Ä—É—Å—Å–∫–∏–π
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –•–æ—Ä–æ—à–µ–µ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üìä FAISS –∏–Ω–¥–µ–∫—Å
- **–¢–∏–ø**: IndexFlatIP (Inner Product)
- **–ú–µ—Ç—Ä–∏–∫–∞**: –ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
- **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å**: 384
- **–¢–æ—á–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π

## üõ†Ô∏è –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è RAG —Å–∏—Å—Ç–µ–º—ã
curl http://localhost:8000/api/v1/rag/status

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–∞
ls -la rag_index/
```

### üßπ –û—á–∏—Å—Ç–∫–∞
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
rm -rf rag_index/*

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞
python rag_indexer.py --docs-dir docs/ --output-dir rag_index/
```

### üì¶ –ë—ç–∫–∞–ø
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
tar -czf rag_index_backup.tar.gz rag_index/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
tar -xzf rag_index_backup.tar.gz
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### üåê –° –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- RAG –ø–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –≤–µ–±-–∫–æ–Ω—Å–æ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —á–∞—Ç–µ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ Settings

### ü§ñ –° AI –º–æ–¥–µ–ª—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ –ø—Ä–æ–º–ø—Ç
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö Foundry –º–æ–¥–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### üîå –° MCP —Å–µ—Ä–≤–µ—Ä–æ–º
- RAG –ø–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude Desktop
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö MCP –∫–ª–∏–µ–Ω—Ç–∞—Ö

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[RAG System](../src/rag/rag_system.py)** - –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ RAG —Å–∏—Å—Ç–µ–º—ã
- **[API Reference](../docs/api.md)** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è RAG API
- **[Configuration](../docs/configuration.md)** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RAG —Å–∏—Å—Ç–µ–º—ã

---

**üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [–ì–ª–∞–≤–Ω–æ–µ README](../README.md) | [API Reference](../docs/api.md) | [Configuration](../docs/configuration.md)